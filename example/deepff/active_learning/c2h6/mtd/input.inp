&global
  run_type  deepff
&end global

&deepff
  &deepmd
    &model
      type_map C H
      &descriptor
        type se_a
        sel 6 18
        rcut_smth 0.5
        rcut 6.00
        neuron 25 50 100
        axis_neuron 16
      &end descriptor
    &end model
    &learning_rate
      type exp
      start_lr 0.001
      decay_steps 1000
      stop_lr 3.0e-8
    &end learning_rate
    &loss
      start_pref_e 0.01
      limit_pref_e 1
      start_pref_f 1000
      limit_pref_f 1
      start_pref_v 0
      limit_pref_v 0
    &end loss
    &training
      &system
        traj_coord_file ./cp2k_md/test-pos-1.xyz
        traj_frc_file ./cp2k_md/test-frc-1.xyz
        traj_cell_file ./cp2k_md/test-1.cell
        start_frame 0
        end_frame 999
        choosed_frame_num 1000
        set_parts 1
      &end system
      train_stress false
      shuffle_data false
      use_prev_model true
      lr_scale 10.0
      fix_stop_batch false
      model_type use_node
      neuron 180 180 180 ... 240 240 240 ... 300 300 300
      stop_batch 200000
      batch_size 2
      disp_freq 100
      numb_test 5
      save_freq 1000
    &end training
  &end deepmd

  &lammps
    nsteps 100000
    write_restart_freq 1000
    time_step 0.0005
    temp 50.0
    pres 1.0
    tau_t 0.1
    tau_p 0.5
    change_init_str false
    &system
      box ./lmp_init_data/box
      coord ./lmp_init_data/str.inc
      md_type nvt
      use_metad true
      plumed_file ./plumed.dat
    &end system
  &end lammps

  &model_devi
    choose_new_data_num_limit 500
    model_devi_freq 100
    force_conv 0.05
    max_iter 20
  &end model_devi

  &cp2k
    cp2k_inp_file ./cp2k.inp
    use_prev_wfn true
  &end cp2k

  &environ
    cp2k_exe /home/lujunbo/bin/cp2k-8.2/exe/local/cp2k.popt
    cp2k_env_file /home/lujunbo/bin/cp2k-8.2/tools/toolchain/install/setup
    parallel_exe /home/lujunbo/bin/parallel/bin/parallel
    cuda_dir none
    lmp_job_per_node 1
    lmp_mpi_num_per_job 12
    lmp_omp_num_per_job 1
    cp2k_job_per_node 6
  &end environ
&end deepff

